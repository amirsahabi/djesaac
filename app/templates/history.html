<html>
<head>
    <title>DJESAAC</title>
    <!--<link rel="stylesheet" type="text/css" href="{{url_for('static', filename='styles/responsetable.css')}}"/>-->
    <script type="text/javascript" src="{{url_for('static', filename='js/jquery-3.2.0.js')}}"></script>
    <script type="text/javascript" src="{{url_for('static', filename='js/history.js')}}"></script>
    <script type="text/javascript" src="{{url_for('static', filename='js/add.js')}}"></script>
    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Ubuntu" />
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="../static/styles/styles.css" />
</head>
<body>
    <script>
        $(document).ready(function () {

            $('.add_song').click(function () {
                if ($('.open_add').is(":hidden")) {
                    $('.history').animate({marginTop:'+=' + $('.open_add').height()});
                    $('.open_add').slideDown('slow');
                } else {

                    $('.history').animate({marginTop:'-=' + $('.open_add').height()});
                    $('.open_add').slideUp('fast');
                }
            });

            var eventSource = new EventSource("/updater");
            eventSource.onmessage = function(event) {
                //reload the page for now, in the future hopefully it's dynamic
                window.location.reload()
            };

        });


    </script>

    <div id="nav">
        <a class="nav_link" href="..">HOME</a>
        <a href="#" class="add_song nav_link" >ADD SONG</a>
        <a class="nav_link current" href="../history/">HISTORY</a>

        <div class="open_add hide">
            <input type="text" class="songLink" id="songLink" name="songLink" placeholder="Link to song ...">
            <button type="submit" class="addSong" style="position: relative; top: 9px;" id="submitButton" onclick="onSubmit()" value="Submit">
                <i class="material-icons blue"><i class="material-icons">file_upload</i>
                </i>
            </button>
        </div>
    </div>


    <div class="history">
        <table>
            <tr>
                <th>#</th>
                <th>Title</th>
                <th>Link</th>
                <th></th>
            </tr>
            <tbody>
                {% for event in history %}
                <tr>
                    <td>{{loop.index0}}</td>
                    <td>{{event.songTitle}}</td>
                    <td><a id=table_link href="{{event.songLink}}">Link</a></td>
                    <td><i class="material-icons"><span class='play_stop' onclick="sendReplayRequest('{{event.uuid}}')">replay</span></i></td>
                </tr>
                {% endfor %}
            </tbody>


    </table>
</div>


</body>
</html>
